% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/02_distance.R
\name{dyn_match}
\alias{dyn_match}
\title{Dynamic Matching Function for People-Like-Me}
\usage{
dyn_match(
  lb_train,
  lb_test_ind,
  train = train,
  match_methods = c("euclidean", "mahalanobis", "single"),
  id_var,
  outcome_var,
  time_var,
  match_alpha = NULL,
  match_number = NULL,
  match_time = NULL,
  match_plot,
  ...
)
}
\arguments{
\item{lb_train}{\code{data.frame} The training dataset containing predictions or imputations from two-stage models (brokenstick and linear models).}

\item{lb_test_ind}{\code{data.frame} The testing individual's dataset containing predictions or imputations from the two-stage models.}

\item{train}{\code{data.frame} The original training dataset used to extract the matched individuals.}

\item{match_methods}{\code{character} The method used for distance calculation. Options are \code{"euclidean"}, \code{"mahalanobis"}, or \code{"single"} (for single-time matching).}

\item{id_var}{\code{character} The name of the ID variable in the dataset.}

\item{outcome_var}{\code{character} The name of the outcome variable in the dataset.}

\item{time_var}{\code{character} The name of the time variable in the dataset.}

\item{match_alpha}{\code{numeric} The p-value threshold for Mahalanobis distance matching. If \code{NULL}, this parameter is ignored.}

\item{match_number}{\code{numeric} The number of matches to retrieve from the distance dataframe, specifically for Euclidean or Mahalanobis distance matching. If \code{NULL}, this parameter is ignored.}

\item{match_time}{\code{numeric} The critical time point for single-time matching. This must be specified for single-time matching and included in the anchor time set.}

\item{match_plot}{\code{logical} Whether to generate a plot of the matching individuals' trajectories. Defaults to \code{FALSE}.}

\item{...}{Additional arguments passed to the function.}
}
\value{
A list containing:
\itemize{
\item \code{subset}: A \code{data.frame} of the matched subset from the training dataset based on the selected matching method.
\item \code{plot}: A \code{ggplot} object showing the matching individual trajectories if \code{match_plot = TRUE}, otherwise \code{NULL}.
}
}
\description{
This function performs dynamic matching between a test individual and training data based on specified distance methods (Euclidean, Mahalanobis, or single-time point matching). The function returns a subset of matched individuals and can optionally generate a plot showing the trajectories of the matching individuals.
}
\examples{
\dontrun{
  matches <- dyn_match(lb_train = train_pred,
                       lb_test_ind = test_pred,
                       train = train_data,
                       match_methods = "euclidean",
                       id_var = "id",
                       outcome_var = "height",
                       time_var = "age",
                       match_number = 5,
                       match_plot = TRUE)
}
}
